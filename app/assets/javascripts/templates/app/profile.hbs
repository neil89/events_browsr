<h1>Mi perfil</h1>

{{#each e in nameError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}

{{#each e in surnameError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}

{{#each e in emailError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}

{{#each e in genderError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}

{{#each e in ageError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}

{{#each e in passwordError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}

{{#each e in passwordConfirmationError}}
  <div class="alert alert-danger">{{e}}</div>
{{/each}}


<section class="profile-form">
  <section class="left-column">
    <div {{bindAttr class=":control-group nameError:error"}}>
      <label for="name-id-profile" class="control-label">Nombre</label>
      {{#if isEditing}}
        {{view App.EditProfileView valueBinding="name"}}
      {{else}}
        <div class="info-div">{{model.name}}</div>
      {{/if}}
    </div>  

    <div {{bindAttr class=":control-group surnameError:error"}}>
      <label for="surname-id-profile" class="control-label">Apellidos</label>
      {{#if isEditing}}
        {{view App.EditProfileView valueBinding="surname"}}
      {{else}}
        <div class="info-div">{{model.surname}}</div>
      {{/if}}
    </div>

    <div {{bindAttr class=":control-group emailError:error"}}>
      <label for="email-id-profile" class="control-label">Email</label>
      {{#if isEditing}}
        {{view App.EditProfileView valueBinding="email"}}
      {{else}}
        <div class="info-div">{{model.email}}</div>
      {{/if}}
    </div>
  </section>

  <section class="right-column">
    <div {{bindAttr class=":control-group isEditing:radio-div genderError:error"}}>
      <label class="control-label">Sexo</label>
      {{#if isEditing}}
        <label>
          {{view Ember.RadioButton name="gender-group" selectionBinding="gender" value="male"}}
          Masculino
        </label>
        
        <label>
          {{view Ember.RadioButton name="gender-group" selectionBinding="gender" value="female"}}
          Femenino
        </label>
      {{else}}
        <div class="info-div">{{model.gender}}</div>
      {{/if}}
      
    </div>

    <div {{bindAttr class=":control-group ageError:error"}}>
      <label for="age-id-profile" class="control-label">Edad</label>
      {{#if isEditing}}
        {{view App.EditProfileView valueBinding="age"}}
      {{else}}
        <div class="info-div">{{model.age}}</div>
      {{/if}}
    </div>

    <div class="control-group passwordError:error"}}>
      <label {{bindAttr class=":control-label isEditing:disabled"}}>Contraseña</label>
        <a href="#password-change-modal" role="button" {{bindAttr class=":btn isEditing:disabled"}} data-toggle="modal">Cambiar contraseña</a>
    </div>
  </section>
  <div>
    {{#if isEditing}}
      <button {{action updateUser}} class="btn btn-success">Aceptar</button>
      <button class="btn btn-danger">Cancelar</button>
    {{else}}
      <button {{action editProfile}} class="btn btn-warning">Modificar</button>
      <button {{action deleteUser}} class="btn btn-danger">Eliminar cuenta</button>
    {{/if}}
  </div>
</section>


<div id="password-change-modal" class="modal hide fade" tabindex="-1" role="dialog">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3>Cambiar contraseña</h3>
  </div>
  <div class="modal-body">
    <section class="left-column">
      <div {{bindAttr class=":control-group passwordError:error"}}>
        <label for="password-id-profile" class="control-label">Contraseña actual</label>
        {{view Ember.TextField type="password" valueBinding="password" id="password-id-profile"}}
      </div>
    </section>

    <section class="right-column">
      <div {{bindAttr class=":control-group passwordError:error"}}>
        <label for="password-id-profile" class="control-label">Contraseña nueva</label>
        {{view Ember.TextField type="password" valueBinding="password" id="password-id-profile"}}
      </div>

      <div {{bindAttr class=":control-group passwordConfirmationError:error"}}>
        <label for="password-confirmation-id-profile" class="two-lines-label control-label">Confirmar contraseña nueva</label>
        {{view Ember.TextField type="password" valueBinding="passwordConfirmation" id="password-confirmation-id-profile"}}
      </div>
    </section>
  </div>
  <div class="modal-footer">
    <div>
      <button class="btn btn-success">Aceptar</button>
      <button class="btn btn-danger" data-dismiss="modal">Cancelar</button>
    </div>
  </div>
</div>